<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bell Timer</title>

  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    body {
      margin: 0;
      height: 100vh;
      background: linear-gradient(-45deg, #0b2a5b, #b91c1c, #0b2a5b, #1e3a8a);
      background-size: 400% 400%;
      animation: bgMove 20s ease infinite;
      color: #0f172a;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .wrap {
      height: 100vh;
      display: grid;
      place-items: center;
      padding: 16px;
      box-sizing: border-box;
    }

    .card {
      width: min(1600px, 99vw);
      background: rgba(255,255,255,0.92);
      border-radius: 28px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.35);
      padding: 18px;
      display: grid;
      gap: 12px;
      box-sizing: border-box;
    }

    /* ===== TOP ROW ===== */
    .top {
      display: grid;
      grid-template-columns: 340px 1fr 240px;
      gap: 14px;
      align-items: stretch;
    }

    /* LOGO */
    .logo {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding-left: 10px;
      background: rgba(255,255,255,0.55);
      border-radius: 22px;
      box-shadow: inset 0 0 0 1px rgba(15,23,42,0.06);
    }

    .logo img {
      height: 190px;
      max-width: 100%;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,0.35));
    }

    /* TIMER (CENTER, BIGGEST) */
    .timerCard {
      background: linear-gradient(180deg, #f8fafc, #eef2ff);
      border-radius: 26px;
      box-shadow:
        inset 0 0 0 1px rgba(15,23,42,0.06),
        0 18px 36px rgba(15,23,42,0.18);
      padding: 22px 34px;
      display: grid;
      align-content: center;
      gap: 10px;
      min-height: 340px;
    }

    .timerLabel {
      font-size: 22px;
      color: #1e293b;
      letter-spacing: 0.02em;
    }

    .timerValue {
      font-size: clamp(160px, 13vw, 260px);
      font-weight: 950;
      line-height: 0.92;
      color: #0b2a5b;
      text-shadow: 0 10px 22px rgba(11,42,91,0.35);
      animation: pulse 1.5s ease-in-out infinite;
    }

    .timerSub {
      font-size: 30px;
      color: #334155;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.015); }
      100% { transform: scale(1); }
    }

    /* PERIOD / PASSING (RIGHT) */
    .periodTile {
      background: linear-gradient(180deg, #f8fafc, #eef2ff);
      border-radius: 22px;
      box-shadow:
        inset 0 0 0 1px rgba(15,23,42,0.06),
        0 14px 30px rgba(15,23,42,0.15);
      padding: 16px;
      display: grid;
      align-content: center;
      justify-items: center;
      gap: 10px;
      min-height: 340px;
    }

    .periodLabel {
      font-size: 20px;
      color: #1e293b;
      letter-spacing: 0.02em;
    }

    .periodValue {
      font-size: 72px;
      font-weight: 950;
      line-height: 1;
      color: #0b2a5b;
      text-shadow: 0 6px 16px rgba(11,42,91,0.30);
    }

    .periodRange {
      text-align: center;
      font-size: 22px;
      color: #334155;
      padding: 4px 10px;
    }

    .bottomBar {
      display: flex;
      justify-content: center;
      padding-top: 8px;
      border-top: 1px solid rgba(15,23,42,0.12);
    }

    .switchBtn {
      font-size: 15px;
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 800;
      background: linear-gradient(135deg, #0b2a5b, #1e40af);
      color: white;
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
    }

    .switchBtn:active { transform: scale(0.97); }

    @media (max-width: 1100px) {
      .top {
        grid-template-columns: 1fr;
      }
      .logo { justify-content: center; }
      .periodTile { min-height: 200px; }
      .timerCard { min-height: 260px; }
      .timerValue { font-size: clamp(140px, 20vw, 220px); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">

      <div class="top">
        <div class="logo">
          <img src="HSATigerCircleSPIRIT.png" alt="Harmony Science Academy Tigers">
        </div>

        <div class="timerCard">
          <div class="timerLabel">Time remaining</div>
          <div class="timerValue" id="remainingValue">--:--</div>
          <div class="timerSub" id="nextBellValue"></div>
        </div>

        <div class="periodTile">
          <div class="periodLabel">Period</div>
          <div class="periodValue" id="periodValue"></div>
        </div>
      </div>

      <div class="periodRange" id="periodRange"></div>

      <div class="bottomBar">
        <button class="switchBtn" id="switchBtn"></button>
      </div>

    </div>
  </div>

  <script>
    const toMin = (h, m) => (h * 60) + m;

    const schedules = {
      "1": {
        "mon_thurs": [
          { start: toMin(7,36), end: toMin(8,33), period: 1 },
          { start: toMin(8,37), end: toMin(9,34), period: 2 },
          { start: toMin(9,38), end: toMin(10,35), period: 3 },
          { start: toMin(10,39), end: toMin(11,36), period: 4 },
          { start: toMin(11,40), end: toMin(12,10), period: 5 },
          { start: toMin(12,14), end: toMin(13,11), period: 6 },
          { start: toMin(13,15), end: toMin(14,12), period: 7 },
          { start: toMin(14,16), end: toMin(15,13), period: 8 }
        ]
      },
      "2": {
        "mon_thurs": [
          { start: toMin(7,36), end: toMin(8,33), period: 1 },
          { start: toMin(8,37), end: toMin(9,34), period: 2 },
          { start: toMin(9,38), end: toMin(10,35), period: 3 },
          { start: toMin(10,39), end: toMin(11,36), period: 4 },
          { start: toMin(11,40), end: toMin(12,37), period: 5 },
          { start: toMin(12,41), end: toMin(13,11), period: 6 },
          { start: toMin(13,15), end: toMin(14,12), period: 7 },
          { start: toMin(14,16), end: toMin(15,13), period: 8 }
        ]
      }
    };

    const el = (id) => document.getElementById(id);
    const switchBtn = el("switchBtn");
    let building = localStorage.getItem("bell_building") || "2";

    function pad(n){ return String(n).padStart(2, "0"); }
    function formatTime(mins){
      const h = Math.floor(mins / 60);
      const m = mins % 60;
      const ampm = h >= 12 ? "PM" : "AM";
      const hh = ((h + 11) % 12) + 1;
      return `${hh}:${pad(m)} ${ampm}`;
    }
    function nowMinutes(){
      const n = new Date();
      return (n.getHours() * 60) + n.getMinutes() + (n.getSeconds() / 60);
    }

    function updateButton(){
      switchBtn.textContent =
        building === "2" ? "Switch to Building 1" : "Switch to Building 2";
    }

    switchBtn.onclick = () => {
      building = building === "2" ? "1" : "2";
      localStorage.setItem("bell_building", building);
      updateButton();
      tick();
    };

    function tick(){
      const blocks = schedules[building].mon_thurs;
      const now = nowMinutes();

      for (const b of blocks) {
        if (now >= b.start && now < b.end) {
          const left = Math.floor((b.end - now) * 60);
          el("periodValue").textContent = `P ${b.period}`;
          el("periodRange").textContent = `${formatTime(b.start)} to ${formatTime(b.end)}`;
          el("remainingValue").textContent = `${Math.floor(left / 60)}:${pad(left % 60)}`;
          el("nextBellValue").textContent = `Next bell at ${formatTime(b.end)}`;
          return;
        }
      }
    }

    updateButton();
    tick();
    setInterval(tick, 1000);
  </script>
</body>
</html>
